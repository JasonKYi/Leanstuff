<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>M40001_C2</title>
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    }
  });
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML" async>
  </script>
  
  <link href="../lecture.css" rel="stylesheet">
  
  <link href="../colorful.css" rel="stylesheet">
  

</head>
<body>
<div id="wrapper">
<div id="content">
<h1>Functions
</h1>
<h2>2.2.1 Function Composition
</h2>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      Given two functions $f : A → B$, $g : B → C$ where $A, B, C$ are sets, then $(g ∘ f)(x)$ (the composition of $g$ and $f$) is $g(f(x))$.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">my_composition</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</pre></div>
   
    </div>
  </div>
</div>

  <p>Remark. Here, to define $\tt{my_composition}$ we used something called lambda abstraction $\tt{λ x : A, g (f x)}$.
This is essentially saying we are mapping $\tt{x}$ with type $\tt{A}$ to $\tt{g(f(x))}$.
Read more about lambda abstraction <a href = "shorturl.at/hGPX1">here</a> or <a href = "https://en.wikipedia.org/wiki/Lambda_calculus">here<a>.</p>


<h2>2.3 Injectivity, Surjectivity and Bijectivity
</h2>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      A function $f : X → Y$ is called injective if distinct elements of $X$ get mapped to distinct elements of $Y$. More formally, $f$ is injective if $∀ a, b ∈ X, f(a) = f(b) ⇒ a = b$.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">my_injective</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">f</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span><span class="o">(</span><span class="n">b</span><span class="o">)</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      A function $f : X → Y$ is called surjective if every element of $Y$ gets "hit" by $f$. More formally, $f$ is surjective if $∀ y ∈ Y, ∃ x ∈ X$ such that $f(x) = y$.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">my_surjective</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">f</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      A function $f : X → Y$ is called bijective if it is both injective and surjective.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">my_bijective</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="n">injective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">f</span>
</pre></div>
   
    </div>
  </div>
</div>

  <p>Remark. Although we have defined some lovely properties for our functions, it turns out that these definitions are already defined in the LEAN maths library.
So while our effort might be wasted, we can now use some theorems already written without going through them ourselves!</p>


<h1>Bijectivity and Composition
</h1>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>Let $f : X → Y$ and $g : Y → Z$ be functions, then if $f$ and $g$ are both injective, then so is $g ∘ f$.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span class="kd">theorem</span> <span class="n">both_injective</span> 
    <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">)</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">injective</span> <span class="n">g</span> <span class="bp">→</span> <span class="n">injective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">Suppose that $f$ and $g$ are injective functions, we need to show that $g ∘ f$ is also injective, i.e. if $(g ∘ f)(a) = (g ∘ f)(b)$, then $a = b$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intros</span> <span class="n">h</span> <span class="n">a</span> <span class="n">b</span> <span class="n">ha</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span>
<span class="bp">⊢</span> <span class="n">injective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">injective</span> <span class="n">g</span> <span class="bp">→</span> <span class="n">injective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Since $g$ is injective, we have $f(a) = f(b)$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">apply</span> <span class="n">h.left</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">b</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Similarly, since $f$ is injective, $a = b$, which is exactly what we wanted!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">apply</span> <span class="n">h.right</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">b</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">b</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">assumption</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">b</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">b</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>

  <p>Remark. Notice that in step 2, LEAN knew that by definition, $(g ∘ f)(x) = g(f(x))$, so we have $g (f(a)) = g (f(b))$, how smart is that!</p>


<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>Let $f : X → Y$ and $g : Y → Z$ be functions, then if $f$ and $g$ are both surjective, then so is $g ∘ f$.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span class="kd">theorem</span> <span class="n">both_surjective</span>
    <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">)</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span> <span class="bp">→</span> <span class="n">surjective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">Suppose that $f$ and $g$ are surjective functions, we need to show that $g ∘ f$ is also surjective, i.e. $∀ z ∈ Z, ∃ x ∈ X, (g ∘ f)(x) = z$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intros</span> <span class="n">h</span> <span class="n">z</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span> <span class="bp">→</span> <span class="n">surjective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">Z</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">z</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Since $g$ is surjective, there is a $y ∈ Y$ such that $g(y) = z$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">have</span> <span class="n">ha</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">,</span> <span class="n">g</span><span class="o">(</span><span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">z</span><span class="o">,</span> <span class="n">apply</span> <span class="n">h.right</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">Z</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">z</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">g</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">z</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">cases</span> <span class="n">ha</span> <span class="k">with</span> <span class="n">y</span> <span class="n">hy</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">g</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">z</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">g</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">z</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Similarly, as $f$ is surjective, there is a $x ∈ X$ such that $f(x) = y$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">have</span> <span class="n">hb</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">f</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span> <span class="n">apply</span> <span class="n">h.left</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">g</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">z</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">g</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">z</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">cases</span> <span class="n">hb</span> <span class="k">with</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">g</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">z</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">g</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">z</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But by definition, $(g ∘ f)(x) = g(f(x)) = g(y) = z$ So we are done!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">existsi</span> <span class="n">x</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">g</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">z</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">g</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">z</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rwa</span> <span class="o">[</span><span class="bp">←</span><span class="n">hy</span><span class="o">,</span> <span class="bp">←</span><span class="n">hx</span><span class="o">]</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">g</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">z</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">z</span> <span class="o">:</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">g</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">z</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>Let $f : X → Y$ and $g : Y → Z$ be functions, then if $f$ and $g$ are both bijective, then so is $g ∘ f$.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span class="kd">theorem</span> <span class="n">both_bijective</span>
    <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">)</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">bijective</span> <span class="n">g</span> <span class="bp">→</span> <span class="n">bijective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">Since $f$ and $g$ are bijective, they are also injective and surjective.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rintro</span> <span class="o">⟨⟨</span><span class="n">hfi</span><span class="o">,</span> <span class="n">hfs</span><span class="o">⟩,</span> <span class="n">hgi</span><span class="o">,</span> <span class="n">hgs</span><span class="o">⟩,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">bijective</span> <span class="n">g</span> <span class="bp">→</span> <span class="n">bijective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">split</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">injective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>

<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But since $f$ and $g$ are injective, $g ∘ f$ is injective by our previous theorem.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">apply</span> <span class="n">both_injective</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">injective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>

<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">injective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">injective</span> <span class="n">g</span>

<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">split</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">injective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">injective</span> <span class="n">g</span>

<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">injective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">injective</span> <span class="n">g</span>

<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">repeat</span> <span class="o">{</span><span class="n">assumption</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">injective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">injective</span> <span class="n">g</span>

<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Similarly, since $f$ and $g$ surjective, $g ∘ f$ is surjective.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">apply</span> <span class="n">both_surjective</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">split</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">surjective</span> <span class="n">g</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="n">g</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Hence, since $g ∘ f$ is injective and surjective, $g ∘ f$ is bijective.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">repeat</span> <span class="o">{</span><span class="n">assumption</span><span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="n">g</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hfi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hgi</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">,</span>
<span class="n">hgs</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="n">g</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<h2>2.4 Inverses
</h2>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      By digging through $\tt{functions}$, it turns out that the brilliant people of LEAN has not yet defined two sided inverse as the time of writting this. 
So let's define $g : Y → X$ to be the two sided inverse of $f : X → Y$ if and only if $∀ x ∈ X, (g ∘ f)(x) = x$ and $∀ y ∈ Y, (f ∘ g)(y) = y$.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">two_sided_inverse</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)(</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)(</span><span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>A function $f : X → Y$ has a two-sided inverse if and only if it is a bijection.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span class="kd">theorem</span> <span class="n">exist_two_sided_inverse</span>
    <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">bijective</span> <span class="n">f</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">Again, since the question is in the form of 'if and only if', we need to prove both sides of the implications.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">split</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">bijective</span> <span class="n">f</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="bp">→</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">$(⇒)$ Suppose the function $f : X → Y$ has a two sided inverse $g$, we need to show that $f$ is bijective, i.e. it is injective and surjective.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rintro</span> <span class="o">⟨</span><span class="n">g</span><span class="o">,</span> <span class="o">⟨</span><span class="n">hlinv</span><span class="o">,</span> <span class="n">hrinv</span><span class="o">⟩⟩,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="bp">→</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">So lets first show that $f$ is injective.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">have</span> <span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">injective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Suppose we have $f(p) = f(q)$ for some $p q ∈ X$, then $f$ is injective if $p = q$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">intros</span> <span class="n">p</span> <span class="n">q</span> <span class="n">hf</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">injective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">f</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">q</span>
<span class="bp">⊢</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">q</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Since $f(p) = f(q)$, we have $g(f(p)) = g(f(q))$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">replace</span> <span class="n">hf</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">q</span><span class="o">),</span> <span class="n">rw</span> <span class="n">hf</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">f</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">q</span>
<span class="bp">⊢</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">q</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">q</span><span class="o">)</span>
<span class="bp">⊢</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">q</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But since $g$ is a double sided inverse of $f$, $∀ x ∈ X, g(f(x)) = x$, hence $p = g(f(p))= g(f(q)) = q$ which is exactly what we need!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="k">have</span> <span class="n">ha</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">p</span> <span class="o">:=</span> <span class="n">hlinv</span> <span class="n">p</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">q</span><span class="o">)</span>
<span class="bp">⊢</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">q</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">q</span><span class="o">),</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">p</span>
<span class="bp">⊢</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">q</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="k">have</span> <span class="n">hb</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">q</span><span class="o">)</span> <span class="bp">=</span> <span class="n">q</span> <span class="o">:=</span> <span class="n">hlinv</span> <span class="n">q</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">q</span><span class="o">),</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">p</span>
<span class="bp">⊢</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">q</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">q</span><span class="o">),</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">p</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">q</span><span class="o">)</span> <span class="bp">=</span> <span class="n">q</span>
<span class="bp">⊢</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">q</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">rw</span> <span class="o">[</span><span class="n">ha</span><span class="o">,</span> <span class="n">hb</span><span class="o">]</span> <span class="n">at</span> <span class="n">hf</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">q</span><span class="o">),</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">p</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">q</span><span class="o">)</span> <span class="bp">=</span> <span class="n">q</span>
<span class="bp">⊢</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">q</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">p</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">q</span><span class="o">)</span> <span class="bp">=</span> <span class="n">q</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">q</span>
<span class="bp">⊢</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">q</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">assumption</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">p</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">q</span><span class="o">)</span> <span class="bp">=</span> <span class="n">q</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">q</span>
<span class="bp">⊢</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">q</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Now we need to show that $f$ is surjective, i.e. $∀ y ∈ Y, ∃ x ∈ X, f(x) = y$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">have</span> <span class="n">hfbsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfbsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">intro</span> <span class="n">y</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfbsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">y</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfbsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Since we have $g(y) ∈ X$, suppose we choose $x$ to be $g(y)$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">existsi</span> <span class="n">g</span> <span class="n">y</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">y</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfbsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">y</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfbsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But, as $g$ is a double inverse of $f$, $f(g(y)) = y$ which is exactly what we need!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">exact</span> <span class="n">hrinv</span> <span class="n">y</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">y</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfbsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfbsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Thus, as $f$ is both injective and surjective, $f$ is bijective!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">split</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfbsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfbsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">injective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfbsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">all_goals</span> <span class="o">{</span><span class="n">try</span> <span class="o">{</span><span class="n">assumption</span><span class="o">}},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfbsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">injective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hlinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hrinv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfbsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">surjective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">$(⇐)$ Now lets prove the reverse implication, i.e. if $f$ is bijective, then $f$ has a two-sided inverse.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rintro</span> <span class="o">⟨</span><span class="n">hfinj</span><span class="o">,</span> <span class="n">hfsur</span><span class="o">⟩,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Since $f$ is surjective, $∀ y ∈ Y, ∃ x ∈ X$ such that $f(x) = y$, lets choose this $x$ to be our output of $g(y)$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">choose</span> <span class="n">g</span> <span class="n">hg</span> <span class="n">using</span> <span class="n">hfsur</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hfsur</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">existsi</span> <span class="n">g</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Now we need to show that $g$ is a double sided inverse of $f$ so let's first show that $g$ is a left inverse of $f$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">split</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span><span class="o">,</span>
<span class="n">a</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Consider that since, by definition of $g$, $∀ y ∈ Y, f(g(y)) = y$ we have $f(g(f(a))) = f(a)$,</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">have</span> <span class="n">ha</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">a</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span><span class="o">,</span>
<span class="n">a</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span><span class="o">,</span>
<span class="n">a</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">a</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span><span class="o">,</span>
<span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">a</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">rw</span> <span class="n">hg</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span><span class="o">,</span>
<span class="n">a</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">a</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span><span class="o">,</span>
<span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">a</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span><span class="o">,</span>
<span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">a</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">therefore, as $f$ is injective, we have $f(g(f(a))) = f(a) ⇒ g(f(a)) = f(a)$. Thus, $g$ is a left inverse of $f$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">exact</span> <span class="n">hfinj</span> <span class="n">ha</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span><span class="o">,</span>
<span class="n">a</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">a</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Now, all we have left to prove is that $g$ is a right inverse of $f$. But that is true by definition, so we are done!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">assumption</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hfinj</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<h2>2.5 Binary Relations
</h2>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      A binary relation $R$ on a set $X$ is a function $R : X^2 → \tt{Prop}$.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">bin_rel</span> <span class="o">(</span><span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Prop</span>
</pre></div>
   
    </div>
  </div>
</div>
<h2>2.6 Common Predicates on Binary Relations
</h2>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      A binary relation $R$ on $X$ is called relfexive if $∀ x ∈ X, R(x, x)$.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">reflexive</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">r</span> <span class="n">x</span> <span class="n">x</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$≤$ is reflexive on $ℝ$.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">le_refl</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="o">((</span><span class="bp">≤</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span> 
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">To prove that the binary relation $≤$ on $ℝ$ is reflexive, we need to show given arbitary $x ∈ ℝ$, $x ≤ x$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intro</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">reflexive</span> <span class="n">has_le.le</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But this obviously true, so we're done!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">refl</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      A binary relation $R$ on $X$ is called symmetric if $∀a, b ∈ X, R(a, b) ⇒ R(b, a)$.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">symmetric</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">r</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">r</span> <span class="n">y</span> <span class="n">x</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$=$ is symmetric on $ℝ$.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span class="kd">theorem</span> <span class="n">eq_symm</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="o">((</span><span class="bp">=</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">To prove that $=$ is a symmetric binary relation on $ℝ$, we need to show that given $x = y$, $y = x$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">h</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">symmetric</span> <span class="n">eq</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But if $x = y$, then we can re-write $y$ as $x$ and $x$ as $y$, thus, $y = x$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rwa</span> <span class="n">h</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      A binary relation $R$ on $X$ is called antisymmetric if $∀ a, b ∈ X, R(a, b) ∧ R(b, a) ⇒ a = b$.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">antisymmetric</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">r</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">r</span> <span class="n">y</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$≤$ is anti-symmetric on $R$.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">le_antisymm</span> <span class="o">:</span> <span class="n">antisymmetric</span> <span class="o">((</span><span class="bp">≤</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">Suppose we have $x, y ∈ ℝ$ where $x ≤ y$ and $y ≤ x$, then we need to show that $x = y$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">h</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">antisymmetric</span> <span class="n">has_le.le</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">have</span> <span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span>

<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="bp">←</span><span class="n">le_iff_lt_or_eq</span><span class="o">},</span> <span class="n">assumption</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span>

<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">By the trichotomy axioms, either $x &lt; y$, $y &lt; x$ or $x = y$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">cases</span> <span class="n">lt_trichotomy</span> <span class="n">x</span> <span class="n">y</span> <span class="k">with</span> <span class="n">ha</span> <span class="n">hb</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or.inl</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>

<span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Let's first suppose that $x &lt; y$, then obviously $¬ (y &lt; x)$. But since we have $y ≤ x$, $x$ must therefore equal to $y$!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="k">suffices</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or.inl</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>

<span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>

<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="bp">¬</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">cases</span> <span class="n">h0.right</span> <span class="k">with</span> <span class="n">hc</span> <span class="n">hd</span><span class="o">,</span> <span class="n">contradiction</span><span class="o">,</span> <span class="n">rwa</span> <span class="n">hd</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>

<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="bp">¬</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="bp">¬</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">simp</span><span class="o">,</span> <span class="k">from</span> <span class="n">h.left</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="bp">¬</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="n">cases</span> <span class="n">hb</span> <span class="k">with</span> <span class="n">he</span> <span class="n">hf</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or.inl</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">he</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>

<span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Let's now consider the other two cases. If $x = y$ then there is nothing left to prove so lets suppose $y &lt; x$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="n">assumption</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or.inl</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">he</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>

<span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Similar to before, $(y &lt; x) ⇒ ¬ (x &lt; y)$. But $(x ≤ y)$, therefore $x = y$!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="k">suffices</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>

<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">cases</span> <span class="n">h0.left</span> <span class="k">with</span> <span class="n">hc</span> <span class="n">hd</span><span class="o">,</span> <span class="n">contradiction</span><span class="o">,</span> <span class="n">rwa</span> <span class="n">hd</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>

<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">simp</span><span class="o">,</span> <span class="k">from</span> <span class="n">h.right</span><span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">),</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="bp">¬</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>

  <p>Remark. Notice that in the above proof I used a lot of curly bracket. This will limit the tactic state to only show the the goal within the brackets and thus also limit clutter.
Read more about how to structure LEAN proofs nicely <a href = "https://leanprover.github.io/theorem_proving_in_lean/tactics.html#structuring-tactic-proofs">here</a>.</p>


<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      A binary relation $R$ on $X$ is called transitive if $∀ a, b, c ∈ X, R(a, b) ∧ R(b, c) ⇒ R(a, c)$. 

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">transitive</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">r</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">r</span> <span class="n">y</span> <span class="n">z</span> <span class="bp">→</span> <span class="n">r</span> <span class="n">x</span> <span class="n">z</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$⇒$ is transitive on the set of propositions.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span class="kd">theorem</span> <span class="n">imply_trans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="o">((</span><span class="bp">→</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">Let $P, Q, R$ be propositions such that $P ⇒ Q$ and $Q ⇒ R$. We then need to prove that $P ⇒ R$. Suppose $P$ is true.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intros</span> <span class="n">P</span> <span class="n">Q</span> <span class="n">R</span> <span class="n">h</span> <span class="n">hp</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">transitive</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">_x</span> <span class="n">_y</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">),</span> <span class="n">_x</span> <span class="bp">→</span> <span class="n">_y</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">P</span> <span class="n">Q</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">_x</span> <span class="n">_y</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">),</span> <span class="n">_x</span> <span class="bp">→</span> <span class="n">_y</span><span class="o">)</span> <span class="n">P</span> <span class="n">Q</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">_x</span> <span class="n">_y</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">),</span> <span class="n">_x</span> <span class="bp">→</span> <span class="n">_y</span><span class="o">)</span> <span class="n">Q</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hp</span> <span class="o">:</span> <span class="n">P</span>
<span class="bp">⊢</span> <span class="n">R</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Then as $P ⇒ Q$, $Q$ must also be true. And again as $Q ⇒ R$, $R$ must also be true. Thus $P ⇒ R$, and we are done!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">from</span> <span class="n">h.right</span> <span class="o">(</span><span class="n">h.left</span> <span class="n">hp</span><span class="o">)</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">P</span> <span class="n">Q</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">_x</span> <span class="n">_y</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">),</span> <span class="n">_x</span> <span class="bp">→</span> <span class="n">_y</span><span class="o">)</span> <span class="n">P</span> <span class="n">Q</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">_x</span> <span class="n">_y</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">),</span> <span class="n">_x</span> <span class="bp">→</span> <span class="n">_y</span><span class="o">)</span> <span class="n">Q</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hp</span> <span class="o">:</span> <span class="n">P</span>
<span class="bp">⊢</span> <span class="n">R</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">P</span> <span class="n">Q</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">_x</span> <span class="n">_y</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">),</span> <span class="n">_x</span> <span class="bp">→</span> <span class="n">_y</span><span class="o">)</span> <span class="n">P</span> <span class="n">Q</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">_x</span> <span class="n">_y</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">),</span> <span class="n">_x</span> <span class="bp">→</span> <span class="n">_y</span><span class="o">)</span> <span class="n">Q</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hp</span> <span class="o">:</span> <span class="n">P</span>
<span class="bp">⊢</span> <span class="n">R</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$≤$ is transitive on $ℝ$.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">le_trans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="o">((</span><span class="bp">≤</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">This one is a bit tricky and require us to delve into how ordering is defined on the reals in LEAN.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="n">h</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">has_le.le</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">z</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">z</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">However, with the power that is mathlib, we see that there is something called $\tt{le_trans}$, so why don't we just steal that for our use here!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">from</span> <span class="n">le_trans</span> <span class="n">h.left</span> <span class="n">h.right</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">z</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">z</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">z</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">z</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<h2>2.7 Partial and Total Orders
</h2>

  <p>Let $R$ be a binary relation on the set $X$.</p>


<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      We call $R$ a partial order if it is reflexive, antisymmetric, and transitive.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">partial_order</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="n">reflexive</span> <span class="n">r</span> <span class="bp">∧</span> <span class="n">antisymmetric</span> <span class="n">r</span> <span class="bp">∧</span> <span class="n">transitive</span> <span class="n">r</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      We call $R$ total if $∀ a, b ∈ X, R(a, b) ∨ R(b, a)$.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">total</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">r</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">r</span> <span class="n">y</span> <span class="n">x</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      We call $R$ a total order if it is total and a partial order.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">total_order</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="n">partial_order</span> <span class="n">r</span> <span class="bp">∧</span> <span class="n">total</span> <span class="n">r</span>
</pre></div>
   
    </div>
  </div>
</div>

  <p>Let's now prove that $≤$ is a total order. As we already have already proven that $≤$ is reflexive, symmetric, and transitive, i.e. its a partial order, we only need to show $≤$ is total to prove that $≤$ is a total order.</p>


<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>$≤$ is total on $ℝ$.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">le_total</span> <span class="o">:</span> <span class="n">total</span> <span class="o">((</span><span class="bp">≤</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">Suppose we have $x, y ∈ ℝ$, by the trichotomy axiom, either $x &lt; y$, $y &lt; x$ or $x = y$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">total</span> <span class="n">has_le.le</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">cases</span> <span class="n">lt_trichotomy</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or.inl</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span>

<span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">If $x &lt; y$ then $x ≤ y$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="n">le_iff_lt_or_eq</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or.inl</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span>

<span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or.inl</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span>

<span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="n">left</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">assumption</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">case</span> <span class="n">or.inl</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span>

<span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">If $x = y$ then also $x ≤ y$. However, if $y &gt; x$, then we have $y ≤ x$. Thus, by considering all the cases, we see either $x ≤ y$ or $y ≤ x$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="n">cases</span> <span class="n">h</span><span class="o">,</span> <span class="n">repeat</span> <span class="o">{</span> <span class="o">{</span><span class="n">left</span><span class="o">,</span> <span class="n">assumption</span><span class="o">}</span> <span class="bp">&lt;|&gt;</span> <span class="n">right</span> <span class="bp">&lt;|&gt;</span> <span class="n">assumption</span> <span class="o">},</span> <span class="n">rwa</span> <span class="n">h</span><span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">case</span> <span class="n">or.inr</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>

  <p>Remark. The last line of this LEAN proof uses something called $\tt{tactic combinators}$. Read about is <a href = "https://leanprover.github.io/theorem_proving_in_lean/tactics.html#tactic-combinators">here</a>.</p>


<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$≤$ is a total order on $ℝ$.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span class="kd">theorem</span> <span class="n">le_total_order</span> <span class="o">:</span> <span class="n">total_order</span> <span class="o">((</span><span class="bp">≤</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">As $≤$ is a partial order and is total, it is a total order!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">repeat</span> <span class="o">{</span><span class="n">split</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">total_order</span> <span class="n">has_le.le</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">4</span> <span class="n">goals</span>
<span class="bp">⊢</span> <span class="n">reflexive</span> <span class="n">has_le.le</span>

<span class="bp">⊢</span> <span class="n">antisymmetric</span> <span class="n">has_le.le</span>

<span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">has_le.le</span>

<span class="bp">⊢</span> <span class="n">total</span> <span class="n">has_le.le</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">repeat</span> <span class="o">{</span><span class="n">simp</span><span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">4</span> <span class="n">goals</span>
<span class="bp">⊢</span> <span class="n">reflexive</span> <span class="n">has_le.le</span>

<span class="bp">⊢</span> <span class="n">antisymmetric</span> <span class="n">has_le.le</span>

<span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">has_le.le</span>

<span class="bp">⊢</span> <span class="n">total</span> <span class="n">has_le.le</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">4</span> <span class="n">goals</span>
<span class="bp">⊢</span> <span class="n">reflexive</span> <span class="n">has_le.le</span>

<span class="bp">⊢</span> <span class="n">antisymmetric</span> <span class="n">has_le.le</span>

<span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">has_le.le</span>

<span class="bp">⊢</span> <span class="n">total</span> <span class="n">has_le.le</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>

  <p>Remark. Notice how I tagged some of the theorems above with $\tt{@[simp]}$? This tells LEAN to try to uses theses theorems whenever I use the tactive $\tt{simp}$. Read more about it <a href = "https://leanprover.github.io/theorem_proving_in_lean/tactics.html#using-the-simplifier">here</a>.</p>


<h2>2.7 Equivalence Relations
</h2>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      A binary relation $R$ on the set $X$ is called an equivalence relation if it is reflexive, symmetric, and transitive.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">equivalence</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="n">reflexive</span> <span class="n">r</span> <span class="bp">∧</span> <span class="n">symmetric</span> <span class="n">r</span> <span class="bp">∧</span> <span class="n">transitive</span> <span class="n">r</span>
</pre></div>
   
    </div>
  </div>
</div>

  <p>We'll present some examples of equivalence relations below.</p>


<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      Suppose we define a binary relation $R(m, n)$, $m, n ∈ ℤ$, where $R(m, n)$ is true if and only if $m - n$ is even.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">R</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">2</span> <span class="bp">∣</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="n">n</span><span class="o">)</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>(1) $R$ is reflexive.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span class="kd">lemma</span> <span class="n">R_refl</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">We have for any $m ∈ ℝ$, $m - m = 0$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intro</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">reflexive</span> <span class="n">R</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">x</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">unfold</span> <span class="n">R</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">x</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span>
<span class="bp">⊢</span> <span class="mi">2</span> <span class="bp">∣</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">As $2 ∣ 0$, we have $R(m, m)$ is true!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">simp</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span>
<span class="bp">⊢</span> <span class="mi">2</span> <span class="bp">∣</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>(2) $R$ is symmetric.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span class="kd">lemma</span> <span class="n">R_symm</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">Suppose we have $m, n ∈ ℝ$ such that $R(m, n)$ is true.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intros</span> <span class="n">m</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">symmetric</span> <span class="n">R</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">R</span> <span class="n">n</span> <span class="n">m</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">As $R(m, n)$ implies $2 ∣ m - n$, $∃ x ∈ ℤ, 2 x = m - n$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rintro</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">⟩,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">R</span> <span class="n">n</span> <span class="n">m</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">m</span> <span class="n">n</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">-</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">n</span> <span class="n">m</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">existsi</span> <span class="bp">-</span><span class="n">x</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">m</span> <span class="n">n</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">-</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">n</span> <span class="n">m</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">m</span> <span class="n">n</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">-</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="bp">-</span><span class="n">x</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But this means $2 (-x) = n - m$, i.e. $2 ∣ n - m$, thus $R(n, m)$ is also true!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">simp</span><span class="o">,</span> <span class="n">rw</span> <span class="bp">←</span><span class="n">hx</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">m</span> <span class="n">n</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">-</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="bp">-</span><span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>(3) $R$ is transitive.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span class="kd">lemma</span> <span class="n">R_trans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">Suppose we have $l, m, n ∈ ℝ$ such that $R(m, l)$ and $R(l, n)$, we need to show $R(m, n)$ is true.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intros</span> <span class="n">l</span> <span class="n">m</span> <span class="n">n</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">R</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">l</span> <span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">l</span> <span class="n">m</span> <span class="bp">∧</span> <span class="n">R</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">R</span> <span class="n">l</span> <span class="n">n</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Since $R(m, l)$ and $R(l, n)$ implies $2 ∣ m - l$ and $2 ∣ l - n$, $∃ x, y ∈ ℤ, 2 x = m - l, 2 y = l - n$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rintro</span> <span class="o">⟨⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">⟩,</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">hy</span><span class="o">⟩⟩,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">l</span> <span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">l</span> <span class="n">m</span> <span class="bp">∧</span> <span class="n">R</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">R</span> <span class="n">l</span> <span class="n">n</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">l</span> <span class="n">m</span> <span class="n">n</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">-</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">-</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">l</span> <span class="n">n</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">existsi</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">l</span> <span class="n">m</span> <span class="n">n</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">-</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">-</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">l</span> <span class="n">n</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">l</span> <span class="n">m</span> <span class="n">n</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">-</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">-</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">l</span> <span class="bp">-</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But then $2 (x + y) = 2 x + 2 y = m - l + l - n = m - n$. Thus $2 ∣ m - n$, i.e. $R(m, n)$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">ring</span><span class="o">,</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">hx</span><span class="o">,</span> <span class="bp">←</span><span class="n">hy</span><span class="o">],</span> <span class="n">ring</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">l</span> <span class="n">m</span> <span class="n">n</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">-</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">-</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">y</span>
<span class="bp">⊢</span> <span class="n">l</span> <span class="bp">-</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$R$ is an equivalence relation.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span class="kd">theorem</span> <span class="n">R_equiv</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">This follows directly from lemma (1), (2), and (3).</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">repeat</span> <span class="o">{</span><span class="n">split</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">equivalence</span> <span class="n">R</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="bp">⊢</span> <span class="n">reflexive</span> <span class="n">R</span>

<span class="bp">⊢</span> <span class="n">symmetric</span> <span class="n">R</span>

<span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">R</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="k">from</span> <span class="n">R_refl</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="bp">⊢</span> <span class="n">reflexive</span> <span class="n">R</span>

<span class="bp">⊢</span> <span class="n">symmetric</span> <span class="n">R</span>

<span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">R</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="bp">⊢</span> <span class="n">symmetric</span> <span class="n">R</span>

<span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">R</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="k">from</span> <span class="n">R_symm</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="bp">⊢</span> <span class="n">symmetric</span> <span class="n">R</span>

<span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">R</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">R</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="k">from</span> <span class="n">R_trans</span><span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">R</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      Let $X$ be a set of sets, where $A, B ∈ X$. Let's define $<\mathtt{\sim}$ such that $A <~ B$ if an only if $∃ g: A → B$, $g$ is an injection.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">brel</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">,</span> <span class="n">function.bijective</span> <span class="n">g</span>
<span class="kd">infix</span> <span class="bp">`</span> <span class="bp">&lt;~</span> <span class="bp">`</span><span class="o">:</span> <span class="mi">50</span> <span class="o">:=</span> <span class="n">brel</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>$&lt;\mathtt{\sim}$ is reflexive.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">brel_refl</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="o">(</span><span class="bp">&lt;~</span><span class="o">)</span> <span class="o">:=</span> 
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">To prove $&lt;\mathtt{\sim}$ is reflexive we need to show there exists a bijection between a set $X$ and itself.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intro</span> <span class="n">X</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">reflexive</span> <span class="n">brel</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="bp">⊢</span> <span class="n">X</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Luckily, we can simply choose the identity function!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">let</span> <span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span> <span class="o">:=</span> <span class="n">id</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="bp">⊢</span> <span class="n">X</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span> <span class="o">:=</span> <span class="n">id</span>
<span class="bp">⊢</span> <span class="n">X</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">existsi</span> <span class="n">g</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span> <span class="o">:=</span> <span class="n">id</span>
<span class="bp">⊢</span> <span class="n">X</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span> <span class="o">:=</span> <span class="n">id</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">g</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Since the identity function is bijective, $&lt;\mathtt{\sim}$ is reflexive as required.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">from</span> <span class="n">function.bijective_id</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span> <span class="o">:=</span> <span class="n">id</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">g</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span> <span class="o">:=</span> <span class="n">id</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">g</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>$&lt;\mathtt{\sim}$ is symmetric.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">brel_symm</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="o">(</span><span class="bp">&lt;~</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">To prove $&lt;\mathtt{\sim}$ is symmetric we need to show that, for sets $X, Y$, $X &lt;~ Y ⇒ Y &lt;~ X$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intros</span> <span class="n">X</span> <span class="n">Y</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">symmetric</span> <span class="n">brel</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="bp">⊢</span> <span class="n">X</span> <span class="bp">&lt;~</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Suppose $X &lt;~ Y$, then by definition, $∃ f : X → Y$, where $f$ is bijective.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rintro</span> <span class="o">⟨</span><span class="n">f</span><span class="o">,</span> <span class="n">hf</span><span class="o">⟩,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="bp">⊢</span> <span class="n">X</span> <span class="bp">&lt;~</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">As proven ealier, $f$ is bijective implies $f$ has a two sided inverse $g$, let's choose that as our function.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">have</span> <span class="n">hg</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="o">{</span><span class="n">rwa</span> <span class="n">exist_two_sided_inverse</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="n">cases</span> <span class="n">hg</span> <span class="k">with</span> <span class="n">g</span> <span class="n">hg</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">existsi</span> <span class="n">g</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">X</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">g</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Since $g$ is bijective if and only if $g$ has a two sided inverse, it suffices to prove that such an inverse exist.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rw</span> <span class="bp">←</span><span class="n">exist_two_sided_inverse</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">g</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g_1</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">g</span> <span class="n">g_1</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But as $g$ is the two sided inverse of $f$ by construction, we have $f$ is the two sided inverse of $g$ by definition, thus such an inverse does exist!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">existsi</span> <span class="n">f</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g_1</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">),</span> <span class="n">two_sided_inverse</span> <span class="n">g</span> <span class="n">g_1</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">two_sided_inverse</span> <span class="n">g</span> <span class="n">f</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">split</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">two_sided_inverse</span> <span class="n">g</span> <span class="n">f</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="k">from</span> <span class="n">hg.right</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Y</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span>

<span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="k">from</span> <span class="n">hg.left</span><span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">two_sided_inverse</span> <span class="n">f</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>$&lt;\mathtt{\sim}$ is transitive.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">brel_trans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="o">(</span><span class="bp">&lt;~</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">Given three sets $X, Y, Z$ where $X &lt;~ Y$ and $Y &lt;~ Z$ we need to show that $X &lt;~ Z$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intros</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">brel</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="bp">⊢</span> <span class="n">X</span> <span class="bp">&lt;~</span> <span class="n">Y</span> <span class="bp">∧</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">Z</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">&lt;~</span> <span class="n">Z</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Since $X &lt;~ Y$ and $Y &lt;~ Z$ there exists bijective functions $f : X → Y$ and $g : Y → Z$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rintro</span> <span class="o">⟨⟨</span><span class="n">f</span><span class="o">,</span> <span class="n">hf</span><span class="o">⟩,</span> <span class="n">g</span><span class="o">,</span> <span class="n">hg</span><span class="o">⟩,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="bp">⊢</span> <span class="n">X</span> <span class="bp">&lt;~</span> <span class="n">Y</span> <span class="bp">∧</span> <span class="n">Y</span> <span class="bp">&lt;~</span> <span class="n">Z</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">&lt;~</span> <span class="n">Z</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">X</span> <span class="bp">&lt;~</span> <span class="n">Z</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But as proven ealier, the composition of two bijective functions is also bijective. Thus, $g ∘ f : X → Z$ is a bijective function which is exactly what we need!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">existsi</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">),</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">X</span> <span class="bp">&lt;~</span> <span class="n">Z</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">apply</span> <span class="n">both_bijective</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">bijective</span> <span class="n">g</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">split</span><span class="o">,</span> <span class="n">repeat</span> <span class="o">{</span><span class="n">assumption</span><span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">bijective</span> <span class="n">g</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">f</span>

<span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">hf</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">f</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">,</span>
<span class="n">hg</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">bijective</span> <span class="n">g</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>

  <p>With that, we can conclude that $&lt;\mathtt{\sim}$ is an equivalence relation!</p>


<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>$&lt;\mathtt{\sim}$ is an equivalence relation</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span class="kd">theorem</span> <span class="n">brel_equiv</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="o">(</span><span class="bp">&lt;~</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">This follows as $&lt;\mathtt{\sim}$ is reflexive, symmetric and transitive!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">repeat</span> <span class="o">{</span><span class="n">split</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="bp">⊢</span> <span class="n">equivalence</span> <span class="n">brel</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="bp">⊢</span> <span class="n">reflexive</span> <span class="n">brel</span>

<span class="bp">⊢</span> <span class="n">symmetric</span> <span class="n">brel</span>

<span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">brel</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">repeat</span> <span class="o">{</span><span class="n">simp</span><span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="bp">⊢</span> <span class="n">reflexive</span> <span class="n">brel</span>

<span class="bp">⊢</span> <span class="n">symmetric</span> <span class="n">brel</span>

<span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">brel</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">3</span> <span class="n">goals</span>
<span class="bp">⊢</span> <span class="n">reflexive</span> <span class="n">brel</span>

<span class="bp">⊢</span> <span class="n">symmetric</span> <span class="n">brel</span>

<span class="bp">⊢</span> <span class="n">transitive</span> <span class="n">brel</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>

  <p>Exercise. I have defined one more binary relation $\mathtt{\sim}&gt;$. Can you try to prove it <a href = "https://leanprover-community.github.io/lean-web-editor/#url=https%3A%2F%2Fraw.githubusercontent.com%2FJasonKYi%2FM4000x_LEAN_formalisation%2Fmaster%2Fhtml%2FExercises%2FExercies3.lean">here</a>?</p>


<h2>2.9 Quotients and Equivalence Classes
</h2>
<h2>2.9.1 Equivalence Classes
</h2>
<div class="definition_wrapper">
  <span class="definition_label">Definition</span>
  <div class="definition_content">
    <div class="definition_text">
      Let $X$ be a set and let $\mathtt{\sim}$ be an equivalence relation on $X$. Let $s ∈ X$ be an arbitrary element. We define the equivalence class of $s$, written $cl(s)$ as $cl(s) = \{x ∈ X ∣ s \mathtt{\sim} x\}.

    </div>
    <div class="definition_lean">
     <div class="highlight"><pre><span class="kd">def</span> <span class="n">cls</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">r</span> <span class="n">s</span> <span class="n">x</span><span class="o">}</span>
</pre></div>
   
    </div>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>(1) Let $X$ be a set and let $R$ be an equivalence relation on $X$. Then, for $s, t ∈ X$, $R(s, t) ⇒ cl(t) ⊆ cl(s)$.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span class="kd">lemma</span> <span class="n">class_relate_lem_a</span> 
    <span class="o">(</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">⊆</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">Given that $R$ is an equivalence relation, we know that it is reflexive, symmetric and transitive.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">href</span><span class="o">,</span> <span class="o">⟨</span><span class="n">hsym</span><span class="o">,</span> <span class="n">htrans</span><span class="o">⟩⟩,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">⊆</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">⊆</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Thus, given an element $x$ in $cl(t)$ (i.e. $R(t, x)$ is true), we have, by transitivit, $R(s, x)$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intros</span> <span class="n">ha</span> <span class="n">x</span> <span class="n">hb</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">⊆</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">have</span> <span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">t</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">hb</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">t</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">replace</span> <span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span> <span class="bp">∧</span> <span class="n">R</span> <span class="n">t</span> <span class="n">x</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span><span class="n">split</span><span class="o">,</span> <span class="n">repeat</span> <span class="o">{</span><span class="n">assumption</span><span class="o">}},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">t</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span> <span class="bp">∧</span> <span class="n">R</span> <span class="n">t</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">replace</span> <span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">htrans</span> <span class="n">s</span> <span class="n">t</span> <span class="n">x</span> <span class="n">hc</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span> <span class="bp">∧</span> <span class="n">R</span> <span class="n">t</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Hence $x ∈ cl(s)$ by definition.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">from</span> <span class="n">hc</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>

  <p>With lemma (1) in place, it is quite easy to see that, not only is $cl(t) ⊆ cl(s)$, in fact, $cl(t) = cl(s)$.</p>


<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>(2) Let $X$ be a set and let $R$ be an equivalence relation on $X$. Then, for $s, t ∈ X$, $R(s, t) ⇒ cl(t) = cl(s)$.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span class="kd">lemma</span> <span class="n">class_relate_lem_b</span> 
    <span class="o">(</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">By lemma (1), $cl(t) ⊆ cl(s), and thus, we only need to prove that $cl(s) ⊆ cl(t)$ in order for $cl(t) = cl(s)$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intro</span> <span class="n">h0</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rw</span> <span class="n">le_antisymm_iff</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">≤</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">≤</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">split</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">≤</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">≤</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">≤</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">≤</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">all_goals</span> <span class="o">{</span><span class="n">apply</span> <span class="n">class_relate_lem_a</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">≤</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">≤</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">equivalence</span> <span class="n">R</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">repeat</span> <span class="o">{</span><span class="n">assumption</span><span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">equivalence</span> <span class="n">R</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">equivalence</span> <span class="n">R</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">equivalence</span> <span class="n">R</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">t</span> <span class="n">s</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But, since $R$ is and equivalence relation, it is symmetric.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="o">{</span><span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">href</span><span class="o">,</span> <span class="o">⟨</span><span class="n">hsym</span><span class="o">,</span> <span class="n">htrans</span><span class="o">⟩⟩,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">t</span> <span class="n">s</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">t</span> <span class="n">s</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Hence, $R(s, t) ↔ R(t, s)$ which by lemma (1) implies $cl(s) ⊆ cl(t)$ as required.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="k">from</span> <span class="n">hsym</span> <span class="n">s</span> <span class="n">t</span> <span class="n">h0</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">t</span> <span class="n">s</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">t</span> <span class="n">s</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h0</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">t</span> <span class="n">s</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>
<div class="lemma_wrapper">
  <span class="lemma_label">Lemma</span>
  <div class="lemma_content">
	<div class="lemma_text">
	  <p>(3) Let $X$ be a set and let $R$ be an equivalence relation on $X$. Then, for $s, t ∈ X$, $¬ R(s, t) ⇒ cl(t) ∩ cl(s) = ∅$.</p>

	</div>

	<div class="lemma_lean">
	  <div class="highlight"><pre><span class="kd">lemma</span> <span class="n">class_not_relate</span>
    <span class="o">(</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="o">:=</span>
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">We prove by contradiction. Suppose $cl(t) ∩ cl(s) ≠ ∅$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">intros</span> <span class="n">ha</span> <span class="n">hb</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span>
<span class="bp">⊢</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span> <span class="bp">→</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Then, there must be some $x$ in $cl(t) ∩ cl(s)$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">have</span> <span class="n">hx</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">set.exists_mem_of_ne_empty</span> <span class="n">hb</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rcases</span> <span class="n">hx</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="o">⟨</span><span class="n">hα</span><span class="o">,</span> <span class="n">hβ</span><span class="o">⟩⟩,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Thus, by definition, $R(t, x)$ and $R(s, t)$ must both be true!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">href</span><span class="o">,</span> <span class="o">⟨</span><span class="n">hsym</span><span class="o">,</span> <span class="n">htrans</span><span class="o">⟩⟩,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">have</span> <span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">R</span> <span class="n">x</span> <span class="n">t</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span><span class="n">split</span><span class="o">,</span> 
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">s</span> <span class="n">x</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">x</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="k">from</span> <span class="n">hβ</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">s</span> <span class="n">x</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">x</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">x</span> <span class="n">t</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="n">apply</span> <span class="n">hsym</span><span class="o">,</span> <span class="k">from</span> <span class="n">hα</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">x</span> <span class="n">t</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">R</span> <span class="n">x</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But this means $R(s, t)$ must also be true by transitivity, a contradiction to $¬ R(s, t)$!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">have</span> <span class="n">hd</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span><span class="k">from</span> <span class="n">htrans</span> <span class="n">s</span> <span class="n">x</span> <span class="n">t</span> <span class="n">hc</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">R</span> <span class="n">x</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">R</span> <span class="n">x</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hd</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">contradiction</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="bp">¬¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">ha</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">R</span> <span class="n">s</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hb</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">cls</span> <span class="n">R</span> <span class="n">t</span> <span class="bp">∩</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hα</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hβ</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">,</span>
<span class="n">href</span> <span class="o">:</span> <span class="n">reflexive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hsym</span> <span class="o">:</span> <span class="n">symmetric</span> <span class="n">R</span><span class="o">,</span>
<span class="n">htrans</span> <span class="o">:</span> <span class="n">transitive</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hc</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">R</span> <span class="n">x</span> <span class="n">t</span><span class="o">,</span>
<span class="n">hd</span> <span class="o">:</span> <span class="n">R</span> <span class="n">s</span> <span class="n">t</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>

  <p>We now formally define a partition of a set $X$</p>



  <p>Partition of a set $X$ is a set $A$ of non-empty subsets of $X$ with the property that each element of $X$ is in exacctly one of the subsets.</p>


<div class="theorem_wrapper">
  <span class="theorem_label">Theorem</span>
  <div class="theorem_content">
	<div class="theorem_text">
	  <p>Let $X$ be a set and let $R$ be an equivalence relation on $X$. Then the set $V$ of equivalence classes $\{cl(s) | s ∈ X\}$ for $R$ is a partition of $X$.</p>

	</div>

	<div class="theorem_lean">
	  <div class="highlight"><pre><span class="kd">theorem</span> <span class="n">equiv_relation_partition</span> <span class="c1">-- or replace the set with (set.range (cls R))</span>
    <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">partition</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">}</span> <span class="o">:=</span> 
</pre></div>

	</div>
  </div>

  <div class="proof_wrapper">
    <span class="proof_label">Proof</span>
	<div class="proof_content">
	  
	  <div class="proof_item">
		<span class="proof_item_text">To show that the equivalence classes of $R$ form a partition of $X$, we need to show that every $x ∈ X$ is in exactly one equivalence class of $R$, AND, none of the equivalence classes are empty.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">split</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="n">partition</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span>
    <span class="bp">∃</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">∈</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">}),</span>
      <span class="n">x</span> <span class="bp">∈</span> <span class="n">B</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">∈</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">}</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">B</span> <span class="bp">=</span> <span class="n">C</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="bp">∅</span> <span class="bp">∉</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">So let's first show that every $x ∈ X$ is in exactly one equivalence class of $R$. Let $y$ be and element of $X$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="n">simp</span><span class="o">,</span> <span class="n">intro</span> <span class="n">y</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span>
    <span class="bp">∃</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">∈</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">}),</span>
      <span class="n">x</span> <span class="bp">∈</span> <span class="n">B</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">∈</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">}</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">B</span> <span class="bp">=</span> <span class="n">C</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="bp">∅</span> <span class="bp">∉</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">),</span>
    <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">B</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">B</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">B</span> <span class="bp">=</span> <span class="n">C</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">existsi</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">),</span>
    <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">B</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">B</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">B</span> <span class="bp">=</span> <span class="n">C</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">)</span> <span class="bp">∧</span>
    <span class="n">y</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">C</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">split</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">)</span> <span class="bp">∧</span>
    <span class="n">y</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">C</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">C</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Then obviously $y ∈ cl(y)$ since $R(y, y)$ is true by reflexivity.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="n">use</span> <span class="n">y</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">C</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">C</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="o">{</span><span class="n">split</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">C</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">C</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>            <span class="o">{</span><span class="k">from</span> <span class="n">itself_in_cls</span> <span class="n">R</span> <span class="n">h</span> <span class="n">y</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="mi">2</span> <span class="n">goals</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span>

<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">C</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">C</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Okay. So now we need to prove uniqueness. Suppose there is a $x ∈ X$, $x ∈ cl(y)$, we then need to show $cl(y) = cl(x)$.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>            <span class="o">{</span><span class="n">intros</span> <span class="n">C</span> <span class="n">x</span> <span class="n">hC</span> <span class="n">hy_in_C</span><span class="o">,</span> <span class="n">rw</span> <span class="n">hC</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">C</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hC</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hy_in_C</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span>
<span class="bp">⊢</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But this is true by lemma (2)!</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>            <span class="n">apply</span> <span class="n">class_relate_lem_b</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hC</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hy_in_C</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span>
<span class="bp">⊢</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hC</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hy_in_C</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">x</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>            <span class="k">have</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span><span class="o">,</span> <span class="n">rwa</span> <span class="bp">←</span><span class="n">hC</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hC</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hy_in_C</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">x</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hC</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hy_in_C</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">x</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>            <span class="n">unfold</span> <span class="n">cls</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hC</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hy_in_C</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">x</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hC</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hy_in_C</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="o">{</span><span class="n">x_1</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">R</span> <span class="n">x</span> <span class="n">x_1</span><span class="o">}</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">x</span> <span class="n">y</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>            <span class="n">rwa</span> <span class="n">set.mem_set_of_eq</span> <span class="n">at</span> <span class="n">this</span><span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hC</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span><span class="o">,</span>
<span class="n">hy_in_C</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="o">{</span><span class="n">x_1</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">R</span> <span class="n">x</span> <span class="n">x_1</span><span class="o">}</span>
<span class="bp">⊢</span> <span class="n">R</span> <span class="n">x</span> <span class="n">y</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>            <span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>        <span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="bp">∅</span> <span class="bp">∉</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">}</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">Now we have to prove that none of the equivalence classes are empty. But this is quite simple. Suppose there is an equivalence class $cl(x)$ where $x ∈ X$ that is empty.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">{</span><span class="n">simp</span><span class="o">,</span> <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span>
<span class="bp">⊢</span> <span class="bp">∅</span> <span class="bp">∉</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">s</span><span class="o">}</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="bp">∅</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	  <div class="proof_item">
		<span class="proof_item_text">But then $x ∈ cl(x)$ as $R(x, x)$ is true by reflexivity. Ah ha! Contradiction! Hence, such empty equivalence class does not in fact exist! And we are done.</span>
    <div class="proof_item_lean">
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rw</span> <span class="n">set.empty_def</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="bp">∅</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">false</span><span class="o">}</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="k">have</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">false</span><span class="o">},</span> <span class="kd">by</span> <span class="o">{</span><span class="n">rw</span> <span class="n">hx</span><span class="o">,</span> <span class="k">from</span> <span class="n">itself_in_cls</span> <span class="n">R</span> <span class="n">h</span> <span class="n">x</span><span class="o">},</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">false</span><span class="o">}</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">false</span><span class="o">}</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">false</span><span class="o">}</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="n">rwa</span> <span class="n">set.mem_set_of_eq</span> <span class="n">at</span> <span class="n">this</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">false</span><span class="o">}</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">false</span><span class="o">}</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">false</span><span class="o">}</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">false</span><span class="o">}</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
      </div>
      
      <div class="proof_line">
        <span class="tactic_left" href="#"></span>
        <div class="highlight"><pre>    <span class="o">}</span>
</pre></div>

		<span class="tactic_right" href="#"></span>
		<span class="tactic_state_left"><div class="highlight"><pre><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="n">bin_rel</span> <span class="n">X</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">R</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">false</span><span class="o">}</span> <span class="bp">=</span> <span class="n">cls</span> <span class="n">R</span> <span class="n">x</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">false</span><span class="o">}</span>
<span class="bp">⊢</span> <span class="n">false</span>
</pre></div>
</span>
		<span class="tactic_state_right"><div class="highlight"><pre><span class="n">no</span> <span class="n">goals</span>
</pre></div>
</span>
      </div>
      
    </div>
	  </div>
	  
	</div>
    <span class="proof_qed">QED.</span>
  </div>
</div>

  <p>Bonus Exercise. Furthermore, it turns out that if $X$ is a set and $R$ an equivalence relation on $X$. Then any partition of $X$ can form a equivalence relation. Try to prove it <a href = "https://leanprover-community.github.io/lean-web-editor/#url=https%3A%2F%2Fraw.githubusercontent.com%2FJasonKYi%2FM4000x_LEAN_formalisation%2Fmaster%2Fhtml%2FExercises%2FExercies4.lean">here</a> and if you get stuck, <a href = "https://leanprover-community.github.io/lean-web-editor/#url=https%3A%2F%2Fraw.githubusercontent.com%2FJasonKYi%2FM4000x_LEAN_formalisation%2Fmaster%2Fhtml%2FExercises%2FExercies4_sol.lean">here</a> are the solutions.</p>


</div>
<div id="dragbar"></div>
<div id="tactic_state_wrapper">
  <h1 id="tactic_state_header">Tactic state</h1>
<div id="tactic_state">
</div>
</div>
</div>

<script src="../lean.js" type="text/javascript"></script>

<script src="../jquery.min.js" type="text/javascript"></script>

</body>
</html>
